---
key: /2023/03/13/Week16-Day.html
title: TIL - 16주차 코드
tags: springboot mariaDB mybatis sqlSession ERD
---

# 1. 230313

## 1) 트랜잭션

<br>
### 1) 트랜잭션 개념 : 

- ACID 
- 원자성, 지속성, 고립성, 견고성

---

<br><br>
### 2) 트랜잭션 실습 : 

#### a. 첫 번째 실습 :

- 업데이트를 2번 실행했는데 1번만 처리한다. 

- 실습 코드 1 :


<br>

<details>
<summary>DefaultMenuService.java</summary>
<div markdown="1">

```java
package kr.co.rland.web.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.ui.Model;

import kr.co.rland.web.entity.Menu;
import kr.co.rland.web.repository.MenuRepository;

// @Component 어노테이션 설정해서 IOC에서 빈객체를 만들 수 있다. 
@Service
public class DefaultMenuService implements MenuService {
	
	@Autowired
	private MenuRepository repository;
	

	// 객체를 만들어서 결합해준다! 
	// setter가 있어야 xml에서 bean 태그에서 property 속성을 이용할 수 있다. 
	public void setRepository(MenuRepository repository) {
		this.repository = repository;
	}

	@Override
	public List<Menu> getList() {
		return repository.findAll(0,10,"",1,3000,"regDate","desc");
	}

	@Override
	public void pointUp() {
		Menu menu = new Menu();
		
		menu.setId(785L);
		menu.setPrice(1111);
		repository.update(menu);

		menu.setId(785L);
		menu.setPrice(2222);
		repository.update(menu);
	
		
	}

}

```

</div>
</details>


<br>

<details>
<summary>DefaultMenuServiceTest.java</summary>
<div markdown="1">


```java
package kr.co.rland.web.service;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class DefaultMenuServiceTest {

	@Autowired
	private MenuService service;
	
	@Test
	void test() {
		service.pointUp();
		System.out.println("작업 완료");
	}

}



```

</div>
</details>



---

<br>
#### b. 두 번째 실습 :
